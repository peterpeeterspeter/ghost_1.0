<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: GhostMannequinPipeline Pages: 1 -->
<svg width="6016pt" height="369pt"
 viewBox="0.00 0.00 6016.03 368.92" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 364.92)">
<title>GhostMannequinPipeline</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-364.92 6012.03,-364.92 6012.03,4 -4,4"/>
<text text-anchor="middle" x="3004.01" y="-348.92" font-family="Times,serif" font-size="10.00">Ghost Mannequin Pipeline — Primary (Flash) + Fallback (ComfyUI)</text>
<g id="clust1" class="cluster">
<title>cluster0</title>
<path fill="none" stroke="#999999" d="M313.74,-136.92C313.74,-136.92 1180.19,-136.92 1180.19,-136.92 1186.19,-136.92 1192.19,-142.92 1192.19,-148.92 1192.19,-148.92 1192.19,-241.92 1192.19,-241.92 1192.19,-247.92 1186.19,-253.92 1180.19,-253.92 1180.19,-253.92 313.74,-253.92 313.74,-253.92 307.74,-253.92 301.74,-247.92 301.74,-241.92 301.74,-241.92 301.74,-148.92 301.74,-148.92 301.74,-142.92 307.74,-136.92 313.74,-136.92"/>
<text text-anchor="middle" x="746.96" y="-241.92" font-family="Times,serif" font-size="10.00">0. Safety Pre‑Scrub</text>
</g>
<g id="clust2" class="cluster">
<title>cluster1</title>
<path fill="none" stroke="#999999" d="M1383.69,-194.92C1383.69,-194.92 1778.67,-194.92 1778.67,-194.92 1784.67,-194.92 1790.67,-200.92 1790.67,-206.92 1790.67,-206.92 1790.67,-299.92 1790.67,-299.92 1790.67,-305.92 1784.67,-311.92 1778.67,-311.92 1778.67,-311.92 1383.69,-311.92 1383.69,-311.92 1377.69,-311.92 1371.69,-305.92 1371.69,-299.92 1371.69,-299.92 1371.69,-206.92 1371.69,-206.92 1371.69,-200.92 1377.69,-194.92 1383.69,-194.92"/>
<text text-anchor="middle" x="1581.18" y="-299.92" font-family="Times,serif" font-size="10.00">1. Background Removal (FAL)</text>
</g>
<g id="clust3" class="cluster">
<title>cluster2</title>
<path fill="none" stroke="#999999" d="M1850.68,-217.92C1850.68,-217.92 2205.88,-217.92 2205.88,-217.92 2211.88,-217.92 2217.88,-223.92 2217.88,-229.92 2217.88,-229.92 2217.88,-276.92 2217.88,-276.92 2217.88,-282.92 2211.88,-288.92 2205.88,-288.92 2205.88,-288.92 1850.68,-288.92 1850.68,-288.92 1844.68,-288.92 1838.68,-282.92 1838.68,-276.92 1838.68,-276.92 1838.68,-229.92 1838.68,-229.92 1838.68,-223.92 1844.68,-217.92 1850.68,-217.92"/>
<text text-anchor="middle" x="2028.28" y="-276.92" font-family="Times,serif" font-size="10.00">2. Base Analysis (Gemini Pro)</text>
</g>
<g id="clust4" class="cluster">
<title>cluster3</title>
<path fill="none" stroke="#999999" d="M2250.88,-205.92C2250.88,-205.92 2647.97,-205.92 2647.97,-205.92 2653.97,-205.92 2659.97,-211.92 2659.97,-217.92 2659.97,-217.92 2659.97,-288.92 2659.97,-288.92 2659.97,-294.92 2653.97,-300.92 2647.97,-300.92 2647.97,-300.92 2250.88,-300.92 2250.88,-300.92 2244.88,-300.92 2238.88,-294.92 2238.88,-288.92 2238.88,-288.92 2238.88,-217.92 2238.88,-217.92 2238.88,-211.92 2244.88,-205.92 2250.88,-205.92"/>
<text text-anchor="middle" x="2449.42" y="-288.92" font-family="Times,serif" font-size="10.00">3. Advanced Segmentation (Grounded‑SAM)</text>
</g>
<g id="clust5" class="cluster">
<title>cluster4</title>
<path fill="none" stroke="#999999" d="M2700.97,-220.92C2700.97,-220.92 2870.97,-220.92 2870.97,-220.92 2876.97,-220.92 2882.97,-226.92 2882.97,-232.92 2882.97,-232.92 2882.97,-279.92 2882.97,-279.92 2882.97,-285.92 2876.97,-291.92 2870.97,-291.92 2870.97,-291.92 2700.97,-291.92 2700.97,-291.92 2694.97,-291.92 2688.97,-285.92 2688.97,-279.92 2688.97,-279.92 2688.97,-232.92 2688.97,-232.92 2688.97,-226.92 2694.97,-220.92 2700.97,-220.92"/>
<text text-anchor="middle" x="2785.97" y="-279.92" font-family="Times,serif" font-size="10.00">4. Crop Generation (from B)</text>
</g>
<g id="clust6" class="cluster">
<title>cluster5</title>
<path fill="none" stroke="#999999" d="M2942.54,-194.92C2942.54,-194.92 3390.27,-194.92 3390.27,-194.92 3396.27,-194.92 3402.27,-200.92 3402.27,-206.92 3402.27,-206.92 3402.27,-321.92 3402.27,-321.92 3402.27,-327.92 3396.27,-333.92 3390.27,-333.92 3390.27,-333.92 2942.54,-333.92 2942.54,-333.92 2936.54,-333.92 2930.54,-327.92 2930.54,-321.92 2930.54,-321.92 2930.54,-206.92 2930.54,-206.92 2930.54,-200.92 2936.54,-194.92 2942.54,-194.92"/>
<text text-anchor="middle" x="3166.4" y="-321.92" font-family="Times,serif" font-size="10.00">5. Part‑wise Analyses (Gemini Pro)</text>
</g>
<g id="clust7" class="cluster">
<title>cluster6</title>
<path fill="none" stroke="#999999" d="M1349.19,-115.92C1349.19,-115.92 1805.68,-115.92 1805.68,-115.92 1811.68,-115.92 1817.68,-121.92 1817.68,-127.92 1817.68,-127.92 1817.68,-174.92 1817.68,-174.92 1817.68,-180.92 1811.68,-186.92 1805.68,-186.92 1805.68,-186.92 1349.19,-186.92 1349.19,-186.92 1343.19,-186.92 1337.19,-180.92 1337.19,-174.92 1337.19,-174.92 1337.19,-127.92 1337.19,-127.92 1337.19,-121.92 1343.19,-115.92 1349.19,-115.92"/>
<text text-anchor="middle" x="1577.43" y="-174.92" font-family="Times,serif" font-size="10.00">6. On‑Model Proportions (Gemini Pro)</text>
</g>
<g id="clust8" class="cluster">
<title>cluster7</title>
<path fill="none" stroke="#999999" d="M2692.97,-115.92C2692.97,-115.92 3123.11,-115.92 3123.11,-115.92 3129.11,-115.92 3135.11,-121.92 3135.11,-127.92 3135.11,-127.92 3135.11,-174.92 3135.11,-174.92 3135.11,-180.92 3129.11,-186.92 3123.11,-186.92 3123.11,-186.92 2692.97,-186.92 2692.97,-186.92 2686.97,-186.92 2680.97,-180.92 2680.97,-174.92 2680.97,-174.92 2680.97,-127.92 2680.97,-127.92 2680.97,-121.92 2686.97,-115.92 2692.97,-115.92"/>
<text text-anchor="middle" x="2908.04" y="-174.92" font-family="Times,serif" font-size="10.00">7. Proportion‑Aware Mask Refinement</text>
</g>
<g id="clust9" class="cluster">
<title>cluster8</title>
<path fill="none" stroke="#999999" d="M3435.27,-225.92C3435.27,-225.92 3840.5,-225.92 3840.5,-225.92 3846.5,-225.92 3852.5,-231.92 3852.5,-237.92 3852.5,-237.92 3852.5,-284.92 3852.5,-284.92 3852.5,-290.92 3846.5,-296.92 3840.5,-296.92 3840.5,-296.92 3435.27,-296.92 3435.27,-296.92 3429.27,-296.92 3423.27,-290.92 3423.27,-284.92 3423.27,-284.92 3423.27,-237.92 3423.27,-237.92 3423.27,-231.92 3429.27,-225.92 3435.27,-225.92"/>
<text text-anchor="middle" x="3637.89" y="-284.92" font-family="Times,serif" font-size="10.00">8. Compile Spec</text>
</g>
<g id="clust11" class="cluster">
<title>cluster9</title>
<path fill="none" stroke="#999999" d="M3885.5,-127.92C3885.5,-127.92 4673.72,-127.92 4673.72,-127.92 4679.72,-127.92 4685.72,-133.92 4685.72,-139.92 4685.72,-139.92 4685.72,-192.92 4685.72,-192.92 4685.72,-198.92 4679.72,-204.92 4673.72,-204.92 4673.72,-204.92 3885.5,-204.92 3885.5,-204.92 3879.5,-204.92 3873.5,-198.92 3873.5,-192.92 3873.5,-192.92 3873.5,-139.92 3873.5,-139.92 3873.5,-133.92 3879.5,-127.92 3885.5,-127.92"/>
<text text-anchor="middle" x="4279.61" y="-192.92" font-family="Times,serif" font-size="10.00">9. Flash Image Generation (primary)</text>
</g>
<g id="clust10" class="cluster">
<title>cluster85</title>
<path fill="none" stroke="#999999" d="M3894.5,-219.92C3894.5,-219.92 4069.5,-219.92 4069.5,-219.92 4075.5,-219.92 4081.5,-225.92 4081.5,-231.92 4081.5,-231.92 4081.5,-284.92 4081.5,-284.92 4081.5,-290.92 4075.5,-296.92 4069.5,-296.92 4069.5,-296.92 3894.5,-296.92 3894.5,-296.92 3888.5,-296.92 3882.5,-290.92 3882.5,-284.92 3882.5,-284.92 3882.5,-231.92 3882.5,-231.92 3882.5,-225.92 3888.5,-219.92 3894.5,-219.92"/>
<text text-anchor="middle" x="3982" y="-284.92" font-family="Times,serif" font-size="10.00">8.5 Multi‑Stage Appearance Control</text>
</g>
<g id="clust12" class="cluster">
<title>cluster91</title>
<path fill="none" stroke="#999999" d="M4125.5,-48.92C4125.5,-48.92 4262.5,-48.92 4262.5,-48.92 4268.5,-48.92 4274.5,-54.92 4274.5,-60.92 4274.5,-60.92 4274.5,-107.92 4274.5,-107.92 4274.5,-113.92 4268.5,-119.92 4262.5,-119.92 4262.5,-119.92 4125.5,-119.92 4125.5,-119.92 4119.5,-119.92 4113.5,-113.92 4113.5,-107.92 4113.5,-107.92 4113.5,-60.92 4113.5,-60.92 4113.5,-54.92 4119.5,-48.92 4125.5,-48.92"/>
<text text-anchor="middle" x="4194" y="-107.92" font-family="Times,serif" font-size="10.00">9.1 Bounded Retry (once)</text>
</g>
<g id="clust13" class="cluster">
<title>cluster9b</title>
<path fill="none" stroke="#999999" d="M4829.72,-197.92C4829.72,-197.92 5988.03,-197.92 5988.03,-197.92 5994.03,-197.92 6000.03,-203.92 6000.03,-209.92 6000.03,-209.92 6000.03,-256.92 6000.03,-256.92 6000.03,-262.92 5994.03,-268.92 5988.03,-268.92 5988.03,-268.92 4829.72,-268.92 4829.72,-268.92 4823.72,-268.92 4817.72,-262.92 4817.72,-256.92 4817.72,-256.92 4817.72,-209.92 4817.72,-209.92 4817.72,-203.92 4823.72,-197.92 4829.72,-197.92"/>
<text text-anchor="middle" x="5408.88" y="-256.92" font-family="Times,serif" font-size="10.00">9B. Fallback (ComfyUI)</text>
</g>
<g id="clust14" class="cluster">
<title>cluster10</title>
<path fill="none" stroke="#999999" d="M4835.22,-39.92C4835.22,-39.92 5051.22,-39.92 5051.22,-39.92 5057.22,-39.92 5063.22,-45.92 5063.22,-51.92 5063.22,-51.92 5063.22,-158.92 5063.22,-158.92 5063.22,-164.92 5057.22,-170.92 5051.22,-170.92 5051.22,-170.92 4835.22,-170.92 4835.22,-170.92 4829.22,-170.92 4823.22,-164.92 4823.22,-158.92 4823.22,-158.92 4823.22,-51.92 4823.22,-51.92 4823.22,-45.92 4829.22,-39.92 4835.22,-39.92"/>
<text text-anchor="middle" x="4943.22" y="-158.92" font-family="Times,serif" font-size="10.00">10. Post‑Processing &amp; Enhanced QA</text>
</g>
<g id="clust15" class="cluster">
<title>cluster11</title>
<path fill="none" stroke="#999999" d="M5116.72,-28.92C5116.72,-28.92 5484.03,-28.92 5484.03,-28.92 5490.03,-28.92 5496.03,-34.92 5496.03,-40.92 5496.03,-40.92 5496.03,-177.92 5496.03,-177.92 5496.03,-183.92 5490.03,-189.92 5484.03,-189.92 5484.03,-189.92 5116.72,-189.92 5116.72,-189.92 5110.72,-189.92 5104.72,-183.92 5104.72,-177.92 5104.72,-177.92 5104.72,-40.92 5104.72,-40.92 5104.72,-34.92 5110.72,-28.92 5116.72,-28.92"/>
<text text-anchor="middle" x="5300.38" y="-177.92" font-family="Times,serif" font-size="10.00">11. Outputs</text>
</g>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<polygon fill="#eef2ff" stroke="#6366f1" points="272.61,-203.92 55.88,-203.92 0.13,-167.92 216.85,-167.92 272.61,-203.92"/>
<text text-anchor="middle" x="136.37" y="-183.42" font-family="Times,serif" font-size="10.00">Start (A on&#45;model, B flatlay)</text>
</g>
<!-- pre0 -->
<g id="node2" class="node">
<title>pre0</title>
<path fill="#f8f9fb" stroke="#6b7280" d="M432.74,-203.92C432.74,-203.92 321.74,-203.92 321.74,-203.92 315.74,-203.92 309.74,-197.92 309.74,-191.92 309.74,-191.92 309.74,-179.92 309.74,-179.92 309.74,-173.92 315.74,-167.92 321.74,-167.92 321.74,-167.92 432.74,-167.92 432.74,-167.92 438.74,-167.92 444.74,-173.92 444.74,-179.92 444.74,-179.92 444.74,-191.92 444.74,-191.92 444.74,-197.92 438.74,-203.92 432.74,-203.92"/>
<text text-anchor="middle" x="377.24" y="-183.42" font-family="Times,serif" font-size="10.00">Detect skin/person in A</text>
</g>
<!-- start&#45;&gt;pre0 -->
<g id="edge17" class="edge">
<title>start&#45;&gt;pre0</title>
<path fill="none" stroke="black" d="M244.92,-185.92C263.35,-185.92 282.16,-185.92 299.57,-185.92"/>
<polygon fill="black" stroke="black" points="299.64,-189.42 309.64,-185.92 299.64,-182.42 299.64,-189.42"/>
</g>
<!-- pre1 -->
<g id="node3" class="node">
<title>pre1</title>
<path fill="#f8f9fb" stroke="#6b7280" d="M667.74,-206.42C667.74,-206.42 493.74,-206.42 493.74,-206.42 487.74,-206.42 481.74,-200.42 481.74,-194.42 481.74,-194.42 481.74,-177.42 481.74,-177.42 481.74,-171.42 487.74,-165.42 493.74,-165.42 493.74,-165.42 667.74,-165.42 667.74,-165.42 673.74,-165.42 679.74,-171.42 679.74,-177.42 679.74,-177.42 679.74,-194.42 679.74,-194.42 679.74,-200.42 673.74,-206.42 667.74,-206.42"/>
<text text-anchor="middle" x="580.74" y="-194.42" font-family="Times,serif" font-size="10.00">Auto&#45;mask ALL human pixels</text>
<text text-anchor="middle" x="580.74" y="-183.42" font-family="Times,serif" font-size="10.00">(face/hands/arms/neck/hair/jewelry)</text>
<text text-anchor="middle" x="580.74" y="-172.42" font-family="Times,serif" font-size="10.00">Edge erosion ≤ 2–3 px</text>
</g>
<!-- pre0&#45;&gt;pre1 -->
<g id="edge1" class="edge">
<title>pre0&#45;&gt;pre1</title>
<path fill="none" stroke="black" d="M444.77,-185.92C453.35,-185.92 462.31,-185.92 471.34,-185.92"/>
<polygon fill="black" stroke="black" points="471.57,-189.42 481.57,-185.92 471.57,-182.42 471.57,-189.42"/>
</g>
<!-- pre2 -->
<g id="node4" class="node">
<title>pre2</title>
<polygon fill="#eef2ff" stroke="#6366f1" points="955.42,-226.92 765.39,-226.92 716.51,-144.92 906.53,-144.92 955.42,-226.92"/>
<text text-anchor="middle" x="835.96" y="-194.42" font-family="Times,serif" font-size="10.00">Outputs:</text>
<text text-anchor="middle" x="835.96" y="-183.42" font-family="Times,serif" font-size="10.00">• a_mask.png</text>
<text text-anchor="middle" x="835.96" y="-172.42" font-family="Times,serif" font-size="10.00">• a_personless.png</text>
</g>
<!-- pre1&#45;&gt;pre2 -->
<g id="edge2" class="edge">
<title>pre1&#45;&gt;pre2</title>
<path fill="none" stroke="black" d="M680,-185.92C696.58,-185.92 713.84,-185.92 730.57,-185.92"/>
<polygon fill="black" stroke="black" points="730.91,-189.42 740.91,-185.92 730.91,-182.42 730.91,-189.42"/>
</g>
<!-- pre_dec -->
<g id="node5" class="node">
<title>pre_dec</title>
<path fill="#fff7ed" stroke="#d97706" d="M1076.74,-212.34C1076.74,-212.34 1003.64,-189.5 1003.64,-189.5 997.92,-187.71 997.92,-184.13 1003.64,-182.34 1003.64,-182.34 1076.74,-159.5 1076.74,-159.5 1082.46,-157.71 1093.92,-157.71 1099.64,-159.5 1099.64,-159.5 1172.74,-182.34 1172.74,-182.34 1178.46,-184.13 1178.46,-187.71 1172.74,-189.5 1172.74,-189.5 1099.64,-212.34 1099.64,-212.34 1093.92,-214.13 1082.46,-214.13 1076.74,-212.34"/>
<text text-anchor="middle" x="1088.19" y="-188.92" font-family="Times,serif" font-size="10.00">Skin area high?</text>
<text text-anchor="middle" x="1088.19" y="-177.92" font-family="Times,serif" font-size="10.00">(&gt; threshold)</text>
</g>
<!-- pre2&#45;&gt;pre_dec -->
<g id="edge3" class="edge">
<title>pre2&#45;&gt;pre_dec</title>
<path fill="none" stroke="black" d="M931.21,-185.92C947.61,-185.92 964.77,-185.92 981.46,-185.92"/>
<polygon fill="black" stroke="black" points="981.78,-189.42 991.78,-185.92 981.78,-182.42 981.78,-189.42"/>
</g>
<!-- bg0 -->
<g id="node6" class="node">
<title>bg0</title>
<path fill="#f8f9fb" stroke="#6b7280" d="M1489.69,-249.92C1489.69,-249.92 1391.69,-249.92 1391.69,-249.92 1385.69,-249.92 1379.69,-243.92 1379.69,-237.92 1379.69,-237.92 1379.69,-225.92 1379.69,-225.92 1379.69,-219.92 1385.69,-213.92 1391.69,-213.92 1391.69,-213.92 1489.69,-213.92 1489.69,-213.92 1495.69,-213.92 1501.69,-219.92 1501.69,-225.92 1501.69,-225.92 1501.69,-237.92 1501.69,-237.92 1501.69,-243.92 1495.69,-249.92 1489.69,-249.92"/>
<text text-anchor="middle" x="1440.69" y="-229.42" font-family="Times,serif" font-size="10.00">fal&#45;ai/bria or birefnet</text>
</g>
<!-- pre_dec&#45;&gt;bg0 -->
<g id="edge18" class="edge">
<title>pre_dec&#45;&gt;bg0</title>
<path fill="none" stroke="black" d="M1156.36,-194.73C1217.46,-202.75 1307.32,-214.55 1369.38,-222.69"/>
<polygon fill="black" stroke="black" points="1369.11,-226.19 1379.48,-224.02 1370.02,-219.24 1369.11,-226.19"/>
<text text-anchor="middle" x="1264.69" y="-219.72" font-family="Times,serif" font-size="9.00">no (low skin)</text>
</g>
<!-- prop0 -->
<g id="node15" class="node">
<title>prop0</title>
<path fill="#f8f9fb" stroke="#6b7280" d="M1524.19,-159.92C1524.19,-159.92 1357.19,-159.92 1357.19,-159.92 1351.19,-159.92 1345.19,-153.92 1345.19,-147.92 1345.19,-147.92 1345.19,-135.92 1345.19,-135.92 1345.19,-129.92 1351.19,-123.92 1357.19,-123.92 1357.19,-123.92 1524.19,-123.92 1524.19,-123.92 1530.19,-123.92 1536.19,-129.92 1536.19,-135.92 1536.19,-135.92 1536.19,-147.92 1536.19,-147.92 1536.19,-153.92 1530.19,-159.92 1524.19,-159.92"/>
<text text-anchor="middle" x="1440.69" y="-144.92" font-family="Times,serif" font-size="10.00">Analyze A (personless if available)</text>
<text text-anchor="middle" x="1440.69" y="-133.92" font-family="Times,serif" font-size="10.00">ratios: shoulder/torso/sleeve/fit</text>
</g>
<!-- pre_dec&#45;&gt;prop0 -->
<g id="edge19" class="edge">
<title>pre_dec&#45;&gt;prop0</title>
<path fill="none" stroke="black" d="M1157.19,-177.38C1207.61,-171.05 1277.28,-162.31 1334.82,-155.08"/>
<polygon fill="black" stroke="black" points="1335.56,-158.52 1345.05,-153.8 1334.69,-151.57 1335.56,-158.52"/>
<text text-anchor="middle" x="1264.69" y="-173.72" font-family="Times,serif" font-size="9.00">yes → analyze personless A</text>
</g>
<!-- bg_out -->
<g id="node7" class="node">
<title>bg_out</title>
<polygon fill="#eef2ff" stroke="#6366f1" points="1782.9,-284.92 1637.4,-284.92 1599.96,-202.92 1745.47,-202.92 1782.9,-284.92"/>
<text text-anchor="middle" x="1691.43" y="-252.42" font-family="Times,serif" font-size="10.00">Outputs:</text>
<text text-anchor="middle" x="1691.43" y="-241.42" font-family="Times,serif" font-size="10.00">• a_clean.png</text>
<text text-anchor="middle" x="1691.43" y="-230.42" font-family="Times,serif" font-size="10.00">• b_clean.png</text>
</g>
<!-- bg0&#45;&gt;bg_out -->
<g id="edge4" class="edge">
<title>bg0&#45;&gt;bg_out</title>
<path fill="none" stroke="black" d="M1501.9,-234.82C1533.44,-236.35 1572.56,-238.23 1606.97,-239.89"/>
<polygon fill="black" stroke="black" points="1606.86,-243.39 1617.02,-240.38 1607.2,-236.4 1606.86,-243.39"/>
</g>
<!-- ba0 -->
<g id="node8" class="node">
<title>ba0</title>
<path fill="#f8f9fb" stroke="#6b7280" d="M2048.68,-261.92C2048.68,-261.92 1858.68,-261.92 1858.68,-261.92 1852.68,-261.92 1846.68,-255.92 1846.68,-249.92 1846.68,-249.92 1846.68,-237.92 1846.68,-237.92 1846.68,-231.92 1852.68,-225.92 1858.68,-225.92 1858.68,-225.92 2048.68,-225.92 2048.68,-225.92 2054.68,-225.92 2060.68,-231.92 2060.68,-237.92 2060.68,-237.92 2060.68,-249.92 2060.68,-249.92 2060.68,-255.92 2054.68,-261.92 2048.68,-261.92"/>
<text text-anchor="middle" x="1953.68" y="-246.92" font-family="Times,serif" font-size="10.00">Analyze B (flatlay truth)</text>
<text text-anchor="middle" x="1953.68" y="-235.92" font-family="Times,serif" font-size="10.00">category/closure/neckline/sleeve/fabric</text>
</g>
<!-- bg_out&#45;&gt;ba0 -->
<g id="edge20" class="edge">
<title>bg_out&#45;&gt;ba0</title>
<path fill="none" stroke="black" d="M1764.24,-243.92C1786.58,-243.92 1811.82,-243.92 1836.4,-243.92"/>
<polygon fill="black" stroke="black" points="1836.51,-247.42 1846.51,-243.92 1836.51,-240.42 1836.51,-247.42"/>
</g>
<!-- ba_out -->
<g id="node9" class="node">
<title>ba_out</title>
<polygon fill="#eef2ff" stroke="#6366f1" points="2209.98,-261.92 2120.58,-261.92 2097.58,-225.92 2186.98,-225.92 2209.98,-261.92"/>
<text text-anchor="middle" x="2153.78" y="-241.42" font-family="Times,serif" font-size="10.00">base.json</text>
</g>
<!-- ba0&#45;&gt;ba_out -->
<g id="edge5" class="edge">
<title>ba0&#45;&gt;ba_out</title>
<path fill="none" stroke="black" d="M2060.69,-243.92C2073.78,-243.92 2086.71,-243.92 2098.55,-243.92"/>
<polygon fill="black" stroke="black" points="2098.66,-247.42 2108.66,-243.92 2098.66,-240.42 2098.66,-247.42"/>
</g>
<!-- seg0 -->
<g id="node10" class="node">
<title>seg0</title>
<path fill="#f8f9fb" stroke="#6b7280" d="M2374.88,-261.92C2374.88,-261.92 2258.88,-261.92 2258.88,-261.92 2252.88,-261.92 2246.88,-255.92 2246.88,-249.92 2246.88,-249.92 2246.88,-237.92 2246.88,-237.92 2246.88,-231.92 2252.88,-225.92 2258.88,-225.92 2258.88,-225.92 2374.88,-225.92 2374.88,-225.92 2380.88,-225.92 2386.88,-231.92 2386.88,-237.92 2386.88,-237.92 2386.88,-249.92 2386.88,-249.92 2386.88,-255.92 2380.88,-261.92 2374.88,-261.92"/>
<text text-anchor="middle" x="2316.88" y="-246.92" font-family="Times,serif" font-size="10.00">Instance&#45;based prompts</text>
<text text-anchor="middle" x="2316.88" y="-235.92" font-family="Times,serif" font-size="10.00">from base.json</text>
</g>
<!-- ba_out&#45;&gt;seg0 -->
<g id="edge21" class="edge">
<title>ba_out&#45;&gt;seg0</title>
<path fill="none" stroke="black" d="M2198.8,-243.92C2210.49,-243.92 2223.48,-243.92 2236.43,-243.92"/>
<polygon fill="black" stroke="black" points="2236.78,-247.42 2246.78,-243.92 2236.78,-240.42 2236.78,-247.42"/>
</g>
<!-- seg_out -->
<g id="node11" class="node">
<title>seg_out</title>
<polygon fill="#eef2ff" stroke="#6366f1" points="2652.01,-273.92 2470.52,-273.92 2423.84,-213.92 2605.32,-213.92 2652.01,-273.92"/>
<text text-anchor="middle" x="2537.92" y="-246.92" font-family="Times,serif" font-size="10.00">mask.png</text>
<text text-anchor="middle" x="2537.92" y="-235.92" font-family="Times,serif" font-size="10.00">segmentation.json</text>
</g>
<!-- seg0&#45;&gt;seg_out -->
<g id="edge6" class="edge">
<title>seg0&#45;&gt;seg_out</title>
<path fill="none" stroke="black" d="M2386.89,-243.92C2402.67,-243.92 2419.76,-243.92 2436.56,-243.92"/>
<polygon fill="black" stroke="black" points="2436.97,-247.42 2446.97,-243.92 2436.97,-240.42 2436.97,-247.42"/>
</g>
<!-- crop0 -->
<g id="node12" class="node">
<title>crop0</title>
<path fill="#f8f9fb" stroke="#6b7280" d="M2862.97,-264.92C2862.97,-264.92 2708.97,-264.92 2708.97,-264.92 2702.97,-264.92 2696.97,-258.92 2696.97,-252.92 2696.97,-252.92 2696.97,-240.92 2696.97,-240.92 2696.97,-234.92 2702.97,-228.92 2708.97,-228.92 2708.97,-228.92 2862.97,-228.92 2862.97,-228.92 2868.97,-228.92 2874.97,-234.92 2874.97,-240.92 2874.97,-240.92 2874.97,-252.92 2874.97,-252.92 2874.97,-258.92 2868.97,-264.92 2862.97,-264.92"/>
<text text-anchor="middle" x="2785.97" y="-249.92" font-family="Times,serif" font-size="10.00">Neck/L+R Sleeves/Hem/Placket</text>
<text text-anchor="middle" x="2785.97" y="-238.92" font-family="Times,serif" font-size="10.00">crops</text>
</g>
<!-- seg_out&#45;&gt;crop0 -->
<g id="edge22" class="edge">
<title>seg_out&#45;&gt;crop0</title>
<path fill="none" stroke="black" d="M2629.84,-245.03C2648.41,-245.25 2668.02,-245.49 2686.83,-245.72"/>
<polygon fill="black" stroke="black" points="2686.83,-249.22 2696.88,-245.84 2686.92,-242.22 2686.83,-249.22"/>
</g>
<!-- ref0 -->
<g id="node17" class="node">
<title>ref0</title>
<path fill="#f8f9fb" stroke="#6b7280" d="M2870.97,-159.92C2870.97,-159.92 2700.97,-159.92 2700.97,-159.92 2694.97,-159.92 2688.97,-153.92 2688.97,-147.92 2688.97,-147.92 2688.97,-135.92 2688.97,-135.92 2688.97,-129.92 2694.97,-123.92 2700.97,-123.92 2700.97,-123.92 2870.97,-123.92 2870.97,-123.92 2876.97,-123.92 2882.97,-129.92 2882.97,-135.92 2882.97,-135.92 2882.97,-147.92 2882.97,-147.92 2882.97,-153.92 2876.97,-159.92 2870.97,-159.92"/>
<text text-anchor="middle" x="2785.97" y="-144.92" font-family="Times,serif" font-size="10.00">Apply proportions to mask</text>
<text text-anchor="middle" x="2785.97" y="-133.92" font-family="Times,serif" font-size="10.00">carve cavities; normalize geometry</text>
</g>
<!-- seg_out&#45;&gt;ref0 -->
<g id="edge26" class="edge">
<title>seg_out&#45;&gt;ref0</title>
<path fill="none" stroke="black" d="M2606.81,-215.78C2646.24,-199.43 2695.2,-179.13 2731.81,-163.95"/>
<polygon fill="black" stroke="black" points="2733.42,-167.08 2741.32,-160.01 2730.74,-160.61 2733.42,-167.08"/>
</g>
<!-- pw0 -->
<g id="node13" class="node">
<title>pw0</title>
<path fill="#f8f9fb" stroke="#6b7280" d="M3096.54,-270.92C3096.54,-270.92 2950.54,-270.92 2950.54,-270.92 2944.54,-270.92 2938.54,-264.92 2938.54,-258.92 2938.54,-258.92 2938.54,-246.92 2938.54,-246.92 2938.54,-240.92 2944.54,-234.92 2950.54,-234.92 2950.54,-234.92 3096.54,-234.92 3096.54,-234.92 3102.54,-234.92 3108.54,-240.92 3108.54,-246.92 3108.54,-246.92 3108.54,-258.92 3108.54,-258.92 3108.54,-264.92 3102.54,-270.92 3096.54,-270.92"/>
<text text-anchor="middle" x="3023.54" y="-255.92" font-family="Times,serif" font-size="10.00">Neck / Sleeves / Hem / Placket</text>
<text text-anchor="middle" x="3023.54" y="-244.92" font-family="Times,serif" font-size="10.00">details</text>
</g>
<!-- crop0&#45;&gt;pw0 -->
<g id="edge23" class="edge">
<title>crop0&#45;&gt;pw0</title>
<path fill="none" stroke="black" d="M2875.02,-249.16C2892.39,-249.6 2910.68,-250.07 2928.25,-250.52"/>
<polygon fill="black" stroke="black" points="2928.41,-254.02 2938.49,-250.78 2928.59,-247.02 2928.41,-254.02"/>
</g>
<!-- pw_out -->
<g id="node14" class="node">
<title>pw_out</title>
<polygon fill="#eef2ff" stroke="#6366f1" points="3394.35,-306.92 3211.15,-306.92 3164.03,-202.92 3347.22,-202.92 3394.35,-306.92"/>
<text text-anchor="middle" x="3279.19" y="-268.92" font-family="Times,serif" font-size="10.00">neck_detail.json</text>
<text text-anchor="middle" x="3279.19" y="-257.92" font-family="Times,serif" font-size="10.00">sleeve_detail.json</text>
<text text-anchor="middle" x="3279.19" y="-246.92" font-family="Times,serif" font-size="10.00">hem_detail.json</text>
<text text-anchor="middle" x="3279.19" y="-235.92" font-family="Times,serif" font-size="10.00">placket_detail.json</text>
</g>
<!-- pw0&#45;&gt;pw_out -->
<g id="edge7" class="edge">
<title>pw0&#45;&gt;pw_out</title>
<path fill="none" stroke="black" d="M3108.65,-253.58C3130.41,-253.75 3154.07,-253.94 3176.61,-254.12"/>
<polygon fill="black" stroke="black" points="3176.86,-257.62 3186.89,-254.2 3176.91,-250.62 3176.86,-257.62"/>
</g>
<!-- cs0 -->
<g id="node19" class="node">
<title>cs0</title>
<path fill="#f8f9fb" stroke="#6b7280" d="M3595.27,-269.92C3595.27,-269.92 3443.27,-269.92 3443.27,-269.92 3437.27,-269.92 3431.27,-263.92 3431.27,-257.92 3431.27,-257.92 3431.27,-245.92 3431.27,-245.92 3431.27,-239.92 3437.27,-233.92 3443.27,-233.92 3443.27,-233.92 3595.27,-233.92 3595.27,-233.92 3601.27,-233.92 3607.27,-239.92 3607.27,-245.92 3607.27,-245.92 3607.27,-257.92 3607.27,-257.92 3607.27,-263.92 3601.27,-269.92 3595.27,-269.92"/>
<text text-anchor="middle" x="3519.27" y="-254.92" font-family="Times,serif" font-size="10.00">Merge:</text>
<text text-anchor="middle" x="3519.27" y="-243.92" font-family="Times,serif" font-size="10.00">base + part‑wise + proportions</text>
</g>
<!-- pw_out&#45;&gt;cs0 -->
<g id="edge24" class="edge">
<title>pw_out&#45;&gt;cs0</title>
<path fill="none" stroke="black" d="M3370.53,-253.78C3386.98,-253.57 3404.21,-253.36 3420.85,-253.15"/>
<polygon fill="black" stroke="black" points="3421.17,-256.64 3431.13,-253.02 3421.08,-249.64 3421.17,-256.64"/>
</g>
<!-- prop_out -->
<g id="node16" class="node">
<title>prop_out</title>
<polygon fill="#eef2ff" stroke="#6366f1" points="1809.92,-159.92 1621.43,-159.92 1572.95,-123.92 1761.43,-123.92 1809.92,-159.92"/>
<text text-anchor="middle" x="1691.43" y="-139.42" font-family="Times,serif" font-size="10.00">model_proportions.json</text>
</g>
<!-- prop0&#45;&gt;prop_out -->
<g id="edge8" class="edge">
<title>prop0&#45;&gt;prop_out</title>
<path fill="none" stroke="black" d="M1536.44,-141.92C1552.93,-141.92 1570.15,-141.92 1586.86,-141.92"/>
<polygon fill="black" stroke="black" points="1587.18,-145.42 1597.18,-141.92 1587.18,-138.42 1587.18,-145.42"/>
</g>
<!-- prop_out&#45;&gt;ref0 -->
<g id="edge25" class="edge">
<title>prop_out&#45;&gt;ref0</title>
<path fill="none" stroke="black" d="M1785.78,-141.92C1835.36,-141.92 1897.33,-141.92 1952.68,-141.92 1952.68,-141.92 1952.68,-141.92 2538.92,-141.92 2584.7,-141.92 2635.26,-141.92 2678.58,-141.92"/>
<polygon fill="black" stroke="black" points="2678.86,-145.42 2688.86,-141.92 2678.86,-138.42 2678.86,-145.42"/>
</g>
<!-- ref_out -->
<g id="node18" class="node">
<title>ref_out</title>
<polygon fill="#eef2ff" stroke="#6366f1" points="3127.18,-159.92 2962.31,-159.92 2919.89,-123.92 3084.77,-123.92 3127.18,-159.92"/>
<text text-anchor="middle" x="3023.54" y="-139.42" font-family="Times,serif" font-size="10.00">flash_silhouette.png</text>
</g>
<!-- ref0&#45;&gt;ref_out -->
<g id="edge9" class="edge">
<title>ref0&#45;&gt;ref_out</title>
<path fill="none" stroke="black" d="M2883.12,-141.92C2898.88,-141.92 2915.17,-141.92 2930.82,-141.92"/>
<polygon fill="black" stroke="black" points="2931,-145.42 2941,-141.92 2931,-138.42 2931,-145.42"/>
</g>
<!-- fl0 -->
<g id="node22" class="node">
<title>fl0</title>
<path fill="#f8f9fb" stroke="#6b7280" d="M4069.5,-177.42C4069.5,-177.42 3893.5,-177.42 3893.5,-177.42 3887.5,-177.42 3881.5,-171.42 3881.5,-165.42 3881.5,-165.42 3881.5,-148.42 3881.5,-148.42 3881.5,-142.42 3887.5,-136.42 3893.5,-136.42 3893.5,-136.42 4069.5,-136.42 4069.5,-136.42 4075.5,-136.42 4081.5,-142.42 4081.5,-148.42 4081.5,-148.42 4081.5,-165.42 4081.5,-165.42 4081.5,-171.42 4075.5,-177.42 4069.5,-177.42"/>
<text text-anchor="middle" x="3981.5" y="-165.42" font-family="Times,serif" font-size="10.00">Transport guardrails:</text>
<text text-anchor="middle" x="3981.5" y="-154.42" font-family="Times,serif" font-size="10.00">• reference_images as FAL URLs</text>
<text text-anchor="middle" x="3981.5" y="-143.42" font-family="Times,serif" font-size="10.00">• ≤2048 px, JPEG q~86, ≤8 MB/img</text>
</g>
<!-- ref_out&#45;&gt;fl0 -->
<g id="edge27" class="edge">
<title>ref_out&#45;&gt;fl0</title>
<path fill="none" stroke="black" d="M3106.78,-142.41C3156.42,-142.66 3220.94,-142.92 3278.19,-142.92 3278.19,-142.92 3278.19,-142.92 3745.39,-142.92 3786.48,-142.92 3831.55,-145.08 3871.13,-147.7"/>
<polygon fill="black" stroke="black" points="3871.12,-151.21 3881.34,-148.39 3871.6,-144.22 3871.12,-151.21"/>
</g>
<!-- cs_out -->
<g id="node20" class="node">
<title>cs_out</title>
<polygon fill="#eef2ff" stroke="#6366f1" points="3844.62,-269.92 3685.17,-269.92 3644.15,-233.92 3803.6,-233.92 3844.62,-269.92"/>
<text text-anchor="middle" x="3744.39" y="-249.42" font-family="Times,serif" font-size="10.00">compiled_spec.json</text>
</g>
<!-- cs0&#45;&gt;cs_out -->
<g id="edge10" class="edge">
<title>cs0&#45;&gt;cs_out</title>
<path fill="none" stroke="black" d="M3607.49,-251.92C3622.93,-251.92 3639.02,-251.92 3654.51,-251.92"/>
<polygon fill="black" stroke="black" points="3654.58,-255.42 3664.58,-251.92 3654.58,-248.42 3654.58,-255.42"/>
</g>
<!-- ms0 -->
<g id="node21" class="node">
<title>ms0</title>
<path fill="#f8f9fb" stroke="#6b7280" d="M4038.5,-269.42C4038.5,-269.42 3924.5,-269.42 3924.5,-269.42 3918.5,-269.42 3912.5,-263.42 3912.5,-257.42 3912.5,-257.42 3912.5,-240.42 3912.5,-240.42 3912.5,-234.42 3918.5,-228.42 3924.5,-228.42 3924.5,-228.42 4038.5,-228.42 4038.5,-228.42 4044.5,-228.42 4050.5,-234.42 4050.5,-240.42 4050.5,-240.42 4050.5,-257.42 4050.5,-257.42 4050.5,-263.42 4044.5,-269.42 4038.5,-269.42"/>
<text text-anchor="middle" x="3981.5" y="-257.42" font-family="Times,serif" font-size="10.00">Texture ← B</text>
<text text-anchor="middle" x="3981.5" y="-246.42" font-family="Times,serif" font-size="10.00">Structure ← proportions</text>
<text text-anchor="middle" x="3981.5" y="-235.42" font-family="Times,serif" font-size="10.00">Lighting ← studio</text>
</g>
<!-- cs_out&#45;&gt;ms0 -->
<g id="edge28" class="edge">
<title>cs_out&#45;&gt;ms0</title>
<path fill="none" stroke="black" d="M3823.02,-250.93C3848.53,-250.6 3876.88,-250.24 3902.42,-249.92"/>
<polygon fill="black" stroke="black" points="3902.47,-253.41 3912.43,-249.79 3902.38,-246.42 3902.47,-253.41"/>
</g>
<!-- fl1 -->
<g id="node23" class="node">
<title>fl1</title>
<path fill="#f8f9fb" stroke="#6b7280" d="M4257.5,-177.42C4257.5,-177.42 4130.5,-177.42 4130.5,-177.42 4124.5,-177.42 4118.5,-171.42 4118.5,-165.42 4118.5,-165.42 4118.5,-148.42 4118.5,-148.42 4118.5,-142.42 4124.5,-136.42 4130.5,-136.42 4130.5,-136.42 4257.5,-136.42 4257.5,-136.42 4263.5,-136.42 4269.5,-142.42 4269.5,-148.42 4269.5,-148.42 4269.5,-165.42 4269.5,-165.42 4269.5,-171.42 4263.5,-177.42 4257.5,-177.42"/>
<text text-anchor="middle" x="4194" y="-165.42" font-family="Times,serif" font-size="10.00">Prompt (≤900 chars):</text>
<text text-anchor="middle" x="4194" y="-154.42" font-family="Times,serif" font-size="10.00">B = truth, A = proportions</text>
<text text-anchor="middle" x="4194" y="-143.42" font-family="Times,serif" font-size="10.00">(policy‑safe header)</text>
</g>
<!-- ms0&#45;&gt;fl1 -->
<g id="edge29" class="edge">
<title>ms0&#45;&gt;fl1</title>
<path fill="none" stroke="black" d="M4034.87,-228.36C4049.98,-222.26 4066.46,-215.46 4081.5,-208.92 4101.11,-200.39 4122.43,-190.59 4141.12,-181.8"/>
<polygon fill="black" stroke="black" points="4142.8,-184.88 4150.35,-177.45 4139.82,-178.55 4142.8,-184.88"/>
</g>
<!-- fl0&#45;&gt;fl1 -->
<g id="edge11" class="edge">
<title>fl0&#45;&gt;fl1</title>
<path fill="none" stroke="black" d="M4081.59,-156.92C4090.48,-156.92 4099.43,-156.92 4108.18,-156.92"/>
<polygon fill="black" stroke="black" points="4108.35,-160.42 4118.35,-156.92 4108.35,-153.42 4108.35,-160.42"/>
</g>
<!-- fl2 -->
<g id="node24" class="node">
<title>fl2</title>
<path fill="#f8f9fb" stroke="#6b7280" d="M4515.5,-171.92C4515.5,-171.92 4366.5,-171.92 4366.5,-171.92 4360.5,-171.92 4354.5,-165.92 4354.5,-159.92 4354.5,-159.92 4354.5,-147.92 4354.5,-147.92 4354.5,-141.92 4360.5,-135.92 4366.5,-135.92 4366.5,-135.92 4515.5,-135.92 4515.5,-135.92 4521.5,-135.92 4527.5,-141.92 4527.5,-147.92 4527.5,-147.92 4527.5,-159.92 4527.5,-159.92 4527.5,-165.92 4521.5,-171.92 4515.5,-171.92"/>
<text text-anchor="middle" x="4441" y="-156.92" font-family="Times,serif" font-size="10.00">Generate with Flash 2.5 Image</text>
<text text-anchor="middle" x="4441" y="-145.92" font-family="Times,serif" font-size="10.00">(prompt → silhouette → B)</text>
</g>
<!-- fl1&#45;&gt;fl2 -->
<g id="edge12" class="edge">
<title>fl1&#45;&gt;fl2</title>
<path fill="none" stroke="black" d="M4269.51,-156.01C4293.02,-155.72 4319.33,-155.4 4344.11,-155.09"/>
<polygon fill="black" stroke="black" points="4344.3,-158.59 4354.26,-154.97 4344.22,-151.59 4344.3,-158.59"/>
</g>
<!-- fl_dec -->
<g id="node25" class="node">
<title>fl_dec</title>
<path fill="#fff7ed" stroke="#d97706" d="M4609.68,-168.29C4609.68,-168.29 4575.83,-157.55 4575.83,-157.55 4570.11,-155.73 4570.11,-152.1 4575.83,-150.29 4575.83,-150.29 4609.68,-139.55 4609.68,-139.55 4615.39,-137.73 4626.83,-137.73 4632.55,-139.55 4632.55,-139.55 4666.4,-150.29 4666.4,-150.29 4672.11,-152.1 4672.11,-155.73 4666.4,-157.55 4666.4,-157.55 4632.55,-168.29 4632.55,-168.29 4626.83,-170.1 4615.39,-170.1 4609.68,-168.29"/>
<text text-anchor="middle" x="4621.11" y="-151.42" font-family="Times,serif" font-size="10.00">Flash OK?</text>
</g>
<!-- fl2&#45;&gt;fl_dec -->
<g id="edge13" class="edge">
<title>fl2&#45;&gt;fl_dec</title>
<path fill="none" stroke="black" d="M4527.67,-153.92C4536.64,-153.92 4545.65,-153.92 4554.34,-153.92"/>
<polygon fill="black" stroke="black" points="4554.38,-157.42 4564.38,-153.92 4554.38,-150.42 4554.38,-157.42"/>
</g>
<!-- br0 -->
<g id="node26" class="node">
<title>br0</title>
<path fill="#f8f9fb" stroke="#6b7280" d="M4254.5,-92.92C4254.5,-92.92 4133.5,-92.92 4133.5,-92.92 4127.5,-92.92 4121.5,-86.92 4121.5,-80.92 4121.5,-80.92 4121.5,-68.92 4121.5,-68.92 4121.5,-62.92 4127.5,-56.92 4133.5,-56.92 4133.5,-56.92 4254.5,-56.92 4254.5,-56.92 4260.5,-56.92 4266.5,-62.92 4266.5,-68.92 4266.5,-68.92 4266.5,-80.92 4266.5,-80.92 4266.5,-86.92 4260.5,-92.92 4254.5,-92.92"/>
<text text-anchor="middle" x="4194" y="-77.92" font-family="Times,serif" font-size="10.00">Downscale refs ≤1536 px</text>
<text text-anchor="middle" x="4194" y="-66.92" font-family="Times,serif" font-size="10.00">Short prompt &lt;700 chars</text>
</g>
<!-- fl_dec&#45;&gt;br0 -->
<g id="edge31" class="edge">
<title>fl_dec&#45;&gt;br0</title>
<path fill="none" stroke="black" d="M4597.82,-143.14C4579.39,-134.69 4552.31,-123.33 4527.5,-116.92 4443.65,-95.25 4344.89,-84.58 4276.91,-79.44"/>
<polygon fill="black" stroke="black" points="4276.92,-75.94 4266.69,-78.7 4276.41,-82.92 4276.92,-75.94"/>
<text text-anchor="middle" x="4441" y="-119.72" font-family="Times,serif" font-size="9.00">no</text>
</g>
<!-- fb0 -->
<g id="node27" class="node">
<title>fb0</title>
<path fill="#f8f9fb" stroke="#6b7280" d="M5048.72,-241.92C5048.72,-241.92 4837.72,-241.92 4837.72,-241.92 4831.72,-241.92 4825.72,-235.92 4825.72,-229.92 4825.72,-229.92 4825.72,-217.92 4825.72,-217.92 4825.72,-211.92 4831.72,-205.92 4837.72,-205.92 4837.72,-205.92 5048.72,-205.92 5048.72,-205.92 5054.72,-205.92 5060.72,-211.92 5060.72,-217.92 5060.72,-217.92 5060.72,-229.92 5060.72,-229.92 5060.72,-235.92 5054.72,-241.92 5048.72,-241.92"/>
<text text-anchor="middle" x="4943.22" y="-226.92" font-family="Times,serif" font-size="10.00">Auto skin/person masking on A</text>
<text text-anchor="middle" x="4943.22" y="-215.92" font-family="Times,serif" font-size="10.00">(binary_person_mask.png, masked_A.png)</text>
</g>
<!-- fl_dec&#45;&gt;fb0 -->
<g id="edge33" class="edge">
<title>fl_dec&#45;&gt;fb0</title>
<path fill="none" stroke="black" d="M4655.17,-161.15C4700.67,-171.1 4784.41,-189.41 4849.74,-203.7"/>
<polygon fill="black" stroke="black" points="4849.13,-207.14 4859.65,-205.86 4850.63,-200.31 4849.13,-207.14"/>
<text text-anchor="middle" x="4751.72" y="-195.72" font-family="Times,serif" font-size="9.00">no after retry → fallback</text>
</g>
<!-- qa0 -->
<g id="node31" class="node">
<title>qa0</title>
<path fill="#f8f9fb" stroke="#6b7280" d="M5043.22,-89.42C5043.22,-89.42 4843.22,-89.42 4843.22,-89.42 4837.22,-89.42 4831.22,-83.42 4831.22,-77.42 4831.22,-77.42 4831.22,-60.42 4831.22,-60.42 4831.22,-54.42 4837.22,-48.42 4843.22,-48.42 4843.22,-48.42 5043.22,-48.42 5043.22,-48.42 5049.22,-48.42 5055.22,-54.42 5055.22,-60.42 5055.22,-60.42 5055.22,-77.42 5055.22,-77.42 5055.22,-83.42 5049.22,-89.42 5043.22,-89.42"/>
<text text-anchor="middle" x="4943.22" y="-77.42" font-family="Times,serif" font-size="10.00">Metrics:</text>
<text text-anchor="middle" x="4943.22" y="-66.42" font-family="Times,serif" font-size="10.00">ΔE ≤3, halo ≤1%, BG L* ≥97,</text>
<text text-anchor="middle" x="4943.22" y="-55.42" font-family="Times,serif" font-size="10.00">cavity symmetry ≥95%, props tolerances</text>
</g>
<!-- fl_dec&#45;&gt;qa0 -->
<g id="edge30" class="edge">
<title>fl_dec&#45;&gt;qa0</title>
<path fill="none" stroke="black" d="M4651.18,-145.38C4689.31,-134.26 4758.33,-114.42 4817.72,-98.92 4826.66,-96.59 4835.98,-94.22 4845.32,-91.89"/>
<polygon fill="black" stroke="black" points="4846.18,-95.28 4855.05,-89.48 4844.5,-88.49 4846.18,-95.28"/>
<text text-anchor="middle" x="4751.72" y="-134.72" font-family="Times,serif" font-size="9.00">yes</text>
</g>
<!-- br0&#45;&gt;fl2 -->
<g id="edge32" class="edge">
<title>br0&#45;&gt;fl2</title>
<path fill="none" stroke="black" d="M4250.9,-92.94C4287.62,-104.78 4335.8,-120.32 4374.34,-132.75"/>
<polygon fill="black" stroke="black" points="4373.33,-136.1 4383.92,-135.83 4375.48,-129.43 4373.33,-136.1"/>
<text text-anchor="middle" x="4312" y="-121.72" font-family="Times,serif" font-size="9.00">retry once</text>
</g>
<!-- fb1 -->
<g id="node28" class="node">
<title>fb1</title>
<path fill="#f8f9fb" stroke="#6b7280" d="M5410.88,-241.92C5410.88,-241.92 5189.88,-241.92 5189.88,-241.92 5183.88,-241.92 5177.88,-235.92 5177.88,-229.92 5177.88,-229.92 5177.88,-217.92 5177.88,-217.92 5177.88,-211.92 5183.88,-205.92 5189.88,-205.92 5189.88,-205.92 5410.88,-205.92 5410.88,-205.92 5416.88,-205.92 5422.88,-211.92 5422.88,-217.92 5422.88,-217.92 5422.88,-229.92 5422.88,-229.92 5422.88,-235.92 5416.88,-241.92 5410.88,-241.92"/>
<text text-anchor="middle" x="5300.38" y="-221.42" font-family="Times,serif" font-size="10.00">ControlNet: Depth + SoftEdge/Lineart + Tile</text>
</g>
<!-- fb0&#45;&gt;fb1 -->
<g id="edge14" class="edge">
<title>fb0&#45;&gt;fb1</title>
<path fill="none" stroke="black" d="M5061.01,-223.92C5095.05,-223.92 5132.48,-223.92 5167.39,-223.92"/>
<polygon fill="black" stroke="black" points="5167.65,-227.42 5177.65,-223.92 5167.65,-220.42 5167.65,-227.42"/>
</g>
<!-- fb2 -->
<g id="node29" class="node">
<title>fb2</title>
<path fill="#f8f9fb" stroke="#6b7280" d="M5713.03,-241.92C5713.03,-241.92 5537.03,-241.92 5537.03,-241.92 5531.03,-241.92 5525.03,-235.92 5525.03,-229.92 5525.03,-229.92 5525.03,-217.92 5525.03,-217.92 5525.03,-211.92 5531.03,-205.92 5537.03,-205.92 5537.03,-205.92 5713.03,-205.92 5713.03,-205.92 5719.03,-205.92 5725.03,-211.92 5725.03,-217.92 5725.03,-217.92 5725.03,-229.92 5725.03,-229.92 5725.03,-235.92 5719.03,-241.92 5713.03,-241.92"/>
<text text-anchor="middle" x="5625.03" y="-226.92" font-family="Times,serif" font-size="10.00">IP‑Adapter (Reference‑Only) from B</text>
<text text-anchor="middle" x="5625.03" y="-215.92" font-family="Times,serif" font-size="10.00">weight ~0.6–0.8</text>
</g>
<!-- fb1&#45;&gt;fb2 -->
<g id="edge15" class="edge">
<title>fb1&#45;&gt;fb2</title>
<path fill="none" stroke="black" d="M5422.9,-223.92C5453.02,-223.92 5485.11,-223.92 5514.62,-223.92"/>
<polygon fill="black" stroke="black" points="5514.94,-227.42 5524.94,-223.92 5514.94,-220.42 5514.94,-227.42"/>
</g>
<!-- fb3 -->
<g id="node30" class="node">
<title>fb3</title>
<path fill="#f8f9fb" stroke="#6b7280" d="M5980.03,-241.92C5980.03,-241.92 5774.03,-241.92 5774.03,-241.92 5768.03,-241.92 5762.03,-235.92 5762.03,-229.92 5762.03,-229.92 5762.03,-217.92 5762.03,-217.92 5762.03,-211.92 5768.03,-205.92 5774.03,-205.92 5774.03,-205.92 5980.03,-205.92 5980.03,-205.92 5986.03,-205.92 5992.03,-211.92 5992.03,-217.92 5992.03,-217.92 5992.03,-229.92 5992.03,-229.92 5992.03,-235.92 5986.03,-241.92 5980.03,-241.92"/>
<text text-anchor="middle" x="5877.03" y="-226.92" font-family="Times,serif" font-size="10.00">img2img low denoise 0.15–0.35</text>
<text text-anchor="middle" x="5877.03" y="-215.92" font-family="Times,serif" font-size="10.00">Output ghost_mannequin.png (≥2000 px)</text>
</g>
<!-- fb2&#45;&gt;fb3 -->
<g id="edge16" class="edge">
<title>fb2&#45;&gt;fb3</title>
<path fill="none" stroke="black" d="M5725.19,-223.92C5733.91,-223.92 5742.8,-223.92 5751.69,-223.92"/>
<polygon fill="black" stroke="black" points="5751.71,-227.42 5761.71,-223.92 5751.71,-220.42 5751.71,-227.42"/>
</g>
<!-- fb3&#45;&gt;qa0 -->
<g id="edge36" class="edge">
<title>fb3&#45;&gt;qa0</title>
<path fill="none" stroke="black" d="M5851.94,-205.89C5794.25,-163.98 5642.1,-60.85 5496.03,-24.92 5327.15,16.62 5277.08,-1.72 5104.72,-24.92 5074.5,-28.99 5041.91,-37.18 5014.05,-45.41"/>
<polygon fill="black" stroke="black" points="5012.97,-42.08 5004.4,-48.31 5014.99,-48.78 5012.97,-42.08"/>
</g>
<!-- qa_dec -->
<g id="node32" class="node">
<title>qa_dec</title>
<path fill="#fff7ed" stroke="#d97706" d="M4932.45,-138.64C4932.45,-138.64 4917.24,-131.2 4917.24,-131.2 4911.85,-128.56 4911.85,-123.28 4917.24,-120.64 4917.24,-120.64 4932.45,-113.2 4932.45,-113.2 4937.83,-110.56 4948.61,-110.56 4954,-113.2 4954,-113.2 4969.21,-120.64 4969.21,-120.64 4974.59,-123.28 4974.59,-128.56 4969.21,-131.2 4969.21,-131.2 4954,-138.64 4954,-138.64 4948.61,-141.28 4937.83,-141.28 4932.45,-138.64"/>
<text text-anchor="middle" x="4943.22" y="-123.42" font-family="Times,serif" font-size="10.00">Pass?</text>
</g>
<!-- qa_dec&#45;&gt;fb0 -->
<g id="edge35" class="edge">
<title>qa_dec&#45;&gt;fb0</title>
<path fill="none" stroke="black" d="M4943.22,-144.35C4943.22,-158.82 4943.22,-179.19 4943.22,-195.71"/>
<polygon fill="black" stroke="black" points="4939.72,-195.9 4943.22,-205.9 4946.72,-195.9 4939.72,-195.9"/>
<text text-anchor="middle" x="4935.22" y="-172.72" font-family="Times,serif" font-size="9.00">no → fallback (or 1 edit‑pass)</text>
</g>
<!-- out0 -->
<g id="node33" class="node">
<title>out0</title>
<polygon fill="#eef2ff" stroke="#6366f1" points="5488.18,-162.92 5189.42,-162.92 5112.57,-36.92 5411.33,-36.92 5488.18,-162.92"/>
<text text-anchor="middle" x="5300.38" y="-119.42" font-family="Times,serif" font-size="10.00">ghost_mannequin.png</text>
<text text-anchor="middle" x="5300.38" y="-108.42" font-family="Times,serif" font-size="10.00">flash_silhouette.png</text>
<text text-anchor="middle" x="5300.38" y="-97.42" font-family="Times,serif" font-size="10.00">compiled_spec.json</text>
<text text-anchor="middle" x="5300.38" y="-86.42" font-family="Times,serif" font-size="10.00">(part&#45;wise + proportions JSONs)</text>
<text text-anchor="middle" x="5300.38" y="-75.42" font-family="Times,serif" font-size="10.00">(fallback masks if used)</text>
</g>
<!-- qa_dec&#45;&gt;out0 -->
<g id="edge34" class="edge">
<title>qa_dec&#45;&gt;out0</title>
<path fill="none" stroke="black" d="M4975.43,-123.63C5014.07,-120.81 5082.65,-115.78 5146.8,-111.09"/>
<polygon fill="black" stroke="black" points="5147.33,-114.56 5157.05,-110.34 5146.82,-107.58 5147.33,-114.56"/>
<text text-anchor="middle" x="5086.72" y="-118.72" font-family="Times,serif" font-size="9.00">yes</text>
</g>
</g>
</svg>
